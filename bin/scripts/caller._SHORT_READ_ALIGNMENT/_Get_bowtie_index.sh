#!/bin/bash
#$ -S /bin/bash
#$ -q fs_long@@qc_nehalem
#$ -P project_zavolan
#$ -j y
#$ -cwd
# $ -o LOG._make_bowtie_index.all
# $ -o LOG._Get_bowtie_index_mm9.all
# $ -o LOG._Get_bowtie_index_hg19.all
#$ -o LOG._Get_bowtie_index_hg18.all

#TODO add chr11 to the mm9 list and regenerate the index files
exit;

PATH=$HOME/bin:$PATH

db_name=mm9
db_name=hg19 #hg_TR #TODO set here
bti_dir=/import/bc2/home/zavolan/bilebi00/DATA/Bowtie_DB_INDEX
db_name=hg18 #hg_TR #TODO set here

if [ $db_name == "hg19" ]; then
in=/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrY.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrX.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000249.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000248.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000247.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000246.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000245.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000244.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000243.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000242.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000241.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000240.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000239.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000238.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000237.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000236.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000235.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000234.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000233.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000232.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000231.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000230.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000229.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000228.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000227.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000226.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000225.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000224.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000223.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000222.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000221.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000220.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000219.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000218.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000217.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000216.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000215.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000214.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000213.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000212.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrUn_gl000211.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chrM.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr9_gl000201_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr9_gl000200_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr9_gl000199_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr9_gl000198_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr9.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr8_gl000197_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr8_gl000196_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr8.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr7_gl000195_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr7.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr6.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr5.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr4_gl000194_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr4_gl000193_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr4.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr3.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr2.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr22.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr21_gl000210_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr21.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr20.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr1_gl000192_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr1_gl000191_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr1.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr19_gl000209_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr19_gl000208_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr19.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr18_gl000207_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr18.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr17_gl000206_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr17_gl000205_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr17_gl000204_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr17_gl000203_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr17.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr16.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr15.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr14.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr13.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr12.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr11_gl000202_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr11.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg19/chr10.fa;
elif [ $db_name == "mm9" ]; then
in=/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr10.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr12.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr13.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr13_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr14.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr15.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr16.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr16_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr17.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr17_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr18.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr19.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr1.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr1_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr2.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr3.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr3_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr4.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr4_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr5.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr5_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr6.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr7.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr7_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr8.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr8_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr9.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chr9_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chrM.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chrUn_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chrX.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chrX_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chrY.fa,/import/bc2/home/zavolan/bilebi00/DATA/mm9/chrY_random.fa
elif [ $db_name == "hg18" ]; then
#in=/import/bc2/home/zavolan/GROUP/miRNA/RefSeq/DB_10-01-13/hg/hg_TR.fa
#in=/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr19.fa
#in=/import/bc2/home/zavolan/bilebi00/DATA/hg18/chrX.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chrY.fa
in=/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr10.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr10_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr11.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr11_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr12.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr13.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr13_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr14.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr15.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr15_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr16.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr16_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr17.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr17_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr18.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr18_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr19.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr19_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr1.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr1_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr20.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr21.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr21_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr22.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr22_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr2.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr2_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr3.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr3_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr4.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr4_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr5.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr5_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr6.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr6_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr7.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr7_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr8.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr8_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr9.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chr9_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chrM.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chrX.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chrX_random.fa,/import/bc2/home/zavolan/bilebi00/DATA/hg18/chrY.fa
else
	echo "Unknown genome";
	exit;
fi

mkdir -p $bti_dir; pushd $bti_dir;
bowtie-build $in $db_name

#mv $db_name* $bti_dir/.
#ls -latr $bti_dir/$db_name*
rm -rf $db_name.fa; 
echo $in | sed 's/,/ /g' | while read i; do cat $i; done >> $db_name.fa

samtools faidx $db_name.fa

ls -latr $db_name*



